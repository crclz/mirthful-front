<div *ngIf="(topic$|async) as topic">
    <h1> {{topic.name}} </h1>
    <h2> {{topic.description}} </h2>
    <h3 style="display: flex">
        <mat-icon>person</mat-icon> {{topic.memberCount}}
    </h3>
    <h3 *ngIf="topic.relatedWork"> 相关作品：{{topic.relatedWork}} </h3>



    <!-- Not a member or not logged in -->
    <div *ngIf="(membership$|async) == null">

        <!-- Logged in but not a member -->
        <ng-container *ngIf="(this.auth.me$|async)!=null">
            <button mat-flat-button color="accent" (click)="joinTopic(topic.id)">加入</button>
        </ng-container>

        <!-- Not logged in -->
        <ng-container *ngIf="(this.auth.me$|async)==null">
            <button mat-flat-button color="accent" (click)="auth.showLoginDialog()">登录后加入</button>
        </ng-container>

    </div>

    <ng-container *ngIf="(membership$|async)!=null">
        <h2>你已经是成员✔</h2>
    </ng-container>

    <!-- Requests -->
    <div *ngIf="(membership$|async) as member">
        <div *ngIf="member.role=='Super' ">
            <div *ngFor="let request of requests$|async">
                用户Id: {{request.user.id}},
                用户昵称: {{request.user.nickname}}
                <button mat-raised-button (click)="handleAdminRequest(request.id,true)">同意</button>
                <button mat-raised-button (click)="handleAdminRequest(request.id,false)">拒绝</button>
            </div>
        </div>
    </div>

</div>